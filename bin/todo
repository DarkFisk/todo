#!/usr/bin/env node

/**
 * External dependencies.
 */

var argv = require('argvee')();
var fs = require('fs');

/**
 * Primary command.
 */

var command = argv.commands.shift();

/**
 * Todo items.
 */

var db = '/tmp/todos.txt';

process.on('uncaughtException', function(err) {
  console.error('todo: ' + err.message);
  process.exit(1);
});

if ('ls' === command) {
  console.log(fs.readFileSync(db, 'utf8'));
  process.exit(0);
}

if ('add' === command) {
  var desc = argv.commands.join(' ');
  if (!desc) throw new Error('please enter a todo item');
  fs.writeFileSync(db, desc, 'utf8');
}
